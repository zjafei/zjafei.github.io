---
title: 优化代码的小技巧（三）
date: 2019-02-28 17:04:16
tags: ['函数式编程','Functional programming','优化代码']
category: 'coding'
---

写了那么多的代码，怎么才能确保代码的可控性是个比较头痛的问题。下面就介绍一些小技巧。
<!--more-->

>函数不要直接外围变量

```JAVASCRIPT
var xs = [1,2,3,4,5];

// 没有修改xs
xs.slice(0,3);
//=> [1,2,3]

xs.slice(0,3);
//=> [1,2,3]

xs.slice(0,3);
//=> [1,2,3]


// 修改了xs
xs.splice(0,3);
//=> [1,2,3]

xs.splice(0,3);
//=> [4,5]

xs.splice(0,3);

```
>同样是返回截取的数组，splice 把原来的变量赋值为截取后的数组，所以实际上 splice 每次操作的数值都在改变。但是这些很难发现。来看看另一个例子。

```JAVASCRIPT
// 使用了函数外面的变量
var minimum = 21;

var checkAge = function(age) {
  return age >= minimum;
};
```

>这样的函数很头疼，因为你不知道在使用 `checkAge` 的时候 `minimum` 还是不是原来的值。所以最好还是把 `minimum` 放在函数内部。由函数自己来管理。

```JAVASCRIPT
var checkAge = function(age) {
  var minimum = 21;
  return age >= minimum;
};
```

>其实上面所做的目的只有一个就是把函数变成 `纯函数`，那么什么样的函数可以称为纯函数呢？纯函数是这样一种函数，即相同的输入，永远会得到相同的输出，而且没有任何可观察的副作用。现在你也许又要问了什么是副作用呢？